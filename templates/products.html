<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</head>
<body>

        <div id="menuBtn" class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
        
        <div id="sidebar" class="sidebar">
            <a href="javascript:void(0)" class="closebtn" id="closeBtn">&times;</a>
            <h2 style="color: white; padding-left: 32px;">Меню</h2>
        
            <a href="{{ url_for('index') }}" class="sidebar-item">
                <img src="/static/img/icons/main-page.png" class="sidebar-icon"> Головна сторінка
            </a>
        
            <a {% if request.endpoint=='orders' %} class="sidebar-item active-link" {% else %} href="{{ url_for('orders') }}"
                class="sidebar-item" {% endif %}>
                <img src="/static/img/icons/orders.png" class="sidebar-icon"> Замовлення
            </a>
        
            <a {% if request.endpoint=='customers' %} class="sidebar-item active-link" {% else %}
                href="{{ url_for('customers') }}" class="sidebar-item" {% endif %}>
                <img src="/static/img/icons/customers.png" class="sidebar-icon"> Клієнти
            </a>
        
            <a {% if request.endpoint=='products' %} class="sidebar-item active-link" {% else %}
                href="{{ url_for('products') }}" class="sidebar-item" {% endif %}>
                <img src="/static/img/icons/products.png" class="sidebar-icon"> Товари
            </a>
        
            <a {% if request.endpoint=='warehouse' %} class="sidebar-item active-link" {% else %}
                href="{{ url_for('warehouse') }}" class="sidebar-item" {% endif %}>
                <img src="/static/img/icons/warehouse.png" class="sidebar-icon"> Склад
            </a>
        
            <a {% if request.endpoint=='categories' %} class="sidebar-item active-link" {% else %}
                href="{{ url_for('categories') }}" class="sidebar-item" {% endif %}>
                <img src="/static/img/icons/categories.png" class="sidebar-icon"> Категорії товарів
            </a>
        
            <a {% if request.endpoint=='suppliers' %} class="sidebar-item active-link" {% else %}
                href="{{ url_for('suppliers') }}" class="sidebar-item" {% endif %}>
                <img src="/static/img/icons/suppliers.png" class="sidebar-icon"> Постачальники
            </a>
        
            <a {% if request.endpoint=='employees' %} class="sidebar-item active-link" {% else %}
                href="{{ url_for('employees') }}" class="sidebar-item" {% endif %}>
                <img src="/static/img/icons/employees.png" class="sidebar-icon"> Співробітники
            </a>
        
            <a {% if request.endpoint=='report' %} class="sidebar-item active-link" {% else %} href="{{ url_for('report') }}"
                class="sidebar-item" {% endif %}>
                <img src="/static/img/icons/report.png" class="sidebar-icon"> Звіт по замовленнях
            </a>
        </div>

        <div class="container">
            <div class="page-header">
                <h1>Каталог товарів</h1>
                <a href="{{ url_for('add_record', table_name='products') }}" class="btn btn-secondary">
                    <span> Додати товар</span>
                </a>
            </div>
        
            <div class="filter-section card">
                <form method="get" action="{{ url_for('products') }}" class="filter-form">
                    <div class="filter-group">
                        <input type="checkbox" name="use_name" {% if request.args.get('use_name') %}checked{% endif %}>
                        <label>Назва:</label>
                        <input type="text" name="product_name" value="{{ request.args.get('product_name','') }}"
                            placeholder="Пошук за назвою...">
                    </div>
        
                    <div class="filter-group">
                        <input type="checkbox" name="use_cat" {% if request.args.get('use_cat') %}checked{% endif %}>
                        <label>Категорія:</label>
                        <input type="number" name="category_id" min="0" value="{{ request.args.get('category_id','') }}"
                            placeholder="ID категорії">
                    </div>
        
                    <div class="filter-group">
                        <input type="checkbox" name="use_pmin" {% if request.args.get('use_pmin') %}checked{% endif %}>
                        <label>Ціна від:</label>
                        <input type="number" step="0.05" name="price_min" min="0" value="{{ request.args.get('price_min','') }}"
                            placeholder="0.00">
                    </div>
        
                    <div class="filter-actions">
                        <button type="submit" class="btn btn-primary">Фільтрувати</button>
                        <a href="{{ url_for('products') }}" class="btn btn-outline">Скинути</a>
                    </div>
                </form>
            </div>
        
            <div class="table-container card">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Назва товару</th>
                            <th>Категорія</th>
                            <th>Постачальник</th>
                            <th>Ціна</th>
                            <th>Од. вим.</th>
                            <th style="text-align: center;">Дії</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for p in products %}
                        <tr>
                            <td>{{ p.product_id }}</td>
                            <td><strong>{{ p.product_name }}</strong></td>
                            <td>{{ p.category_id }}</td>
                            <td>{{ p.supplier_id }}</td>
                            <td>{{ p.price }} грн</td>
                            <td>{{ p.unit }}</td>
                            <td class="actions-cell">
                                <a href="{{ url_for('edit_record', table_name='products', record_id=p.product_id) }}"
                                    class="btn-edit">
                                    <img src="{{ url_for('static', filename='img/icons/edit-icon.png') }}" alt="Редагувати">
                                </a>
                                <a href="{{ url_for('delete_record', table_name='products', record_id=p.product_id) }}"
                                    class="delete-link btn-delete" data-name="{{ p.product_name }}">
                                    <img src="{{ url_for('static', filename='img/icons/delete-icon.png') }}" alt="Видалити">
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

</body>
</html>